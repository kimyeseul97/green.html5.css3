<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>mung</title>
<link rel="stylesheet" href="../../css/common.css">
<link rel="stylesheet" href="../../css/list.css">
<link rel="stylesheet" href="../../css/write.css">
<link rel="stylesheet" href="../../library/fontawesome-free-5.15.3-web/css/all.min.css">
</head>

<body>
	<header>
		<!-- 메뉴바 -->
		<div class="gnb">
            <div class="logo">
                <a href="../../index.html"><h2><i class="fas fa-paw"></i> mung <i class="fas fa-paw"></i></h2></a>
            </div>
			<!-- pc메뉴 -->
			<div class="nav_right">
				<a href="#"><i class="fas fa-bars"></i></a>
			</div>
				<ul class="nav_box">
					<li class="exit">
					<a href="#"><i class="far fa-times-circle" style="color: rgb(0, 7, 110); padding-left: 10px;"></i></a>
					</li>
						<li><a href="./pages/login/join.html">hOME</a></li>
						<li><a href="./pages/login/login.html">멍INFO</a></li>
						<li><a href="./pages/login/login.html">멍REVIEW</a></li>
						<li><a href="./pages/login/login.html">멍TALK</a></li>
				</ul>
				<ul class="nav">
					<li><a href="../login/join.html">JOIN</a></li>
					<li><a href="../login/login.html">LOGIN</a></li>
				</ul>
        </div>

        <div id="container">
            <h2>게시판 리스트</h2>
        </div>
    
		
<!-- 리스트 게시판 시작-->
		<div class="testlist">
			<form id="boardForm" name="boardForm" method="post">
				<table class="table">
					<thead>
						<tr>
							<th>번호</th>
							<th>제목</th>
							<th>작성자</th>
							<th>등록일자</th>
						</tr>
					</thead>
					<tbody id="dataSection"></tbody>
				</table>
			</form>

	<div>
		<button id="btn_write" type="button">글작성</button>
	</div>

		<footer class="footer">
            <p>© 2021 Mung by kimyeseul</p>
        </footer>

	<!--js 파일-->
	<script src="../../js/jquery-3.6.0.min.js"></script>
    <script src="../../js/common.js"></script>	
	<script src="../../js/jquery-3.6.0.min.js"></script>

    <script>
	function showDetail(testId) {
		var form = document.getElementById("boardForm");
		var url = "<c:url value='/testDetail.do'/>";
		url = url + "?testId=" + testId;

		form.action = url;
		form.submit();
	}

	//글 작성 버튼 클릭 시 wirte페이지로 이동
	$("#btn_write").click(function javascript_onclikc(){
		$(location).attr('href', 'write.html');
	});
		function getPage(page) {
        var queryString = $("form[name=boardform]").serialize();
				$.ajax({
					   type: "get",
                	   url: "http://localhost:3000/list",
					   data: queryString,

						error : function(){
							alert('실패');
						},

					   success : function(data) {
						const list = res['list'];
						var data = "";
						var block = "";

						console.log(JSON.stringify(data));
						// 테이블의 row를 삽입하는 부패
							for (var i = 0; i < list.length; i++) {
								data += "<tr style='cursor:pointer' onclick='showDetail("
										+ list[i]['testId'] + ")'>";
								data += "<td>" + list[i]['testId'] + "</td>";
								data += "<td>" + list[i]['testTitle'] + "</td>";
								// data += "<td>" + list[i]['testName'] + "</td>";
								data += "<td>" + list[i]['testDate'] + "</td>";
								data += "</tr>";
							}
						$("#dataSection").html(data);
					}
            });
        }
    </script>

</body>
</html>

